# This image belongs to a larger project called Bioinformatics Docker Images Project (http://pegi3s.github.io/dockerfiles)
## (Please note that the original software licenses still apply)

This image facilitates the usage of [SAMtools-stats](http://samtools.sourceforge.net/) and [plot-bamstats](https://github.com/samtools/samtools/blob/develop/misc/plot-bamstats) to collect statistics from a BAM file (samtoos stats) and visualize it graphically (plot-bamstats).

To see `SAMtools-stats` or `plot-bamstats` options, just run:  `docker run --rm pegi3s/samtools-plot_bamstats samtools stats --help` or `docker run --rm pegi3s/samtools-plot_bamstats plot-bamstats --help`.

# Using the SAMtools-plot_bamstats image in Linux
## To generate a stats file
You should adapt and run the following command: `docker run --rm -v /your/data/dir:/data pegi3s/samtools-plot_bamstats sh -c "samtools stats /data/sortedbamfilename.bam > /data/sortedbamfilename.stats"`

In this command, you should replace:
- `/your/data/dir` to point to the directory that contains the bam files you want to analyze.
- `sortedbamfilename.bam` to the name of the bam file you want to process.
- `sortedbamfilename.stats` to the name of the output stats file.

## To generate the plots from a stats file
You should adapt and run the following command: `docker run --rm -v /your/data/dir:/data pegi3s/samtools-plot_bamstats sh -c "plot-bamstats -p /data/output_name /data/sortedbamfilename.stats"`

In this command, you should replace:
- `/your/data/dir` to point to the directory that contains the stats file generated by samtools stats.
- `output_name` to a name for the output plots.
- `sortedbamfilename.stats` to the name of the stats file generated by samtools stats.

# Test data
To test the previous commands, the input SAM file used is available [here](https://raw.githubusercontent.com/pegi3s/dockerfiles/master/samtools_bcftools/1.9/test_data/aln-pe.sam), and the input FASTA file is available [here](https://raw.githubusercontent.com/pegi3s/dockerfiles/master/samtools_bcftools/1.9/test_data/chr19_KI270866v1_alt.fasta).

# Using the SAMtools-plot_bamstats image in Windows

Please note that data must be under the same drive than the Docker Toolbox installation (usually `C:`) and in a folder with write permissions (e.g. `C:/Users/User_name/`).

As in the Linux case, to run an application, you should adapt and run the following command: `docker run --rm -v "/c/Users/User_name/dir/":/data pegi3s/samtools-plot_bamstats ...`
